#
# OpenSIPS Configuration for sage-voice-manager
# Minimal config - routes SIP calls to Python media server
#

####### Global Parameters #########
log_level=3
stderror_enabled=yes
syslog_facility=LOG_LOCAL0

socket=udp:0.0.0.0:5060
socket=tcp:0.0.0.0:5060

####### Load Transport Modules ########
loadmodule "proto_udp.so"
loadmodule "proto_tcp.so"

####### Routing Logic ########
route {
    # Forward all requests to media server
    # Uses environment variables: MEDIA_SERVER_HOST and MEDIA_SERVER_PORT
    $du = "sip:${MEDIA_SERVER_HOST}:${MEDIA_SERVER_PORT}";

    # Simple stateless forwarding
    forward();
}
